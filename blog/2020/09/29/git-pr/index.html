<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/img/favicon.ico">
    
      <link rel="alternate" type="application/atom+xml" title="CodeRefinery" href="https://coderefinery.org/atom.xml" />
    

    
      <title>CodeRefinery - git-pr: painless small pull requests</title>
      <meta name="twitter:title" content="git-pr: painless small pull requests" />
    

    
      <meta name="description" content="We are working with students, researchers, Research Software Engineers from all
disciplines and national e-infrastructure partners to advance FAIRness of
Software management and development practices so that research groups can
collaboratively develop, review, discuss, test, share and reuse their codes.
" />
      <meta name="twitter:description" content="We are working with students, researchers, Research Software Engineers from all
disciplines and national e-infrastructure partners to advance FAIRness of
Software management and development practices so that research groups can
collaboratively develop, review, discuss, test, share and reuse their codes.
" />
    

    
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:image" content="https://raw.githubusercontent.com/coderefinery/coderefinery.org/main/content/logo/coderefinery.png" />
    

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

    <!-- font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- leaflet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" integrity="sha256-BPfK9M5v34c2XP6p0cxVz1mUQLst0gTLk0mlc7kuodA=" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js" integrity="sha256-yDc0eil8GjWFKqN1OSzHSVCiuGghTosZCcRje4tj7iQ=" crossorigin="anonymous"></script>

    <!-- https://github.com/Leaflet/Leaflet.markercluster -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.4.1/dist/leaflet.markercluster-src.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">

    <link href="https://coderefinery.org/css/style.css" rel="stylesheet">
  </head>

  <body>

    <header>

      <!-- navigation -->
      <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="https://coderefinery.org">Home</a>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Get Involved
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="https://coderefinery.org/organization/get-involved">Get involved</a>
                <a class="dropdown-item" href="https://coderefinery.org/organization/who-we-are">Who we are</a>
                <a class="dropdown-item" href="https://coderefinery.org/organization/contributors">Instructors and helpers</a>
                <a class="dropdown-item" href="https://coderefinery.org/organization/hubs">Training hubs</a>
                <a class="dropdown-item" href="https://coderefinery.org/organization/meeting-minutes">Meeting minutes</a>
	          </div>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="https://coderefinery.org/about/project">Project</a>
                <a class="dropdown-item" href="https://coderefinery.org/about/impact">Impact</a>
                <a class="dropdown-item" href="https://coderefinery.org/about/statistics">Statistics</a>
                <a class="dropdown-item" href="https://coderefinery.org/about/code-of-conduct">Code of Conduct</a>
                <a class="dropdown-item" href="https://coderefinery.org/about/reports">Articles and reports</a>
                <a class="dropdown-item" href="https://coderefinery.org/about/history">History</a>
              </div>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Workshops/events
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="https://coderefinery.org/workshops/upcoming">Upcoming workshops/events</a>
                <a class="dropdown-item" href="https://coderefinery.org/workshops/past">Past workshops/events</a>
              </div>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Lessons
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="https://coderefinery.org/lessons">Our lessons</a>
                <a class="dropdown-item" href="https://coderefinery.org/lessons/reusing">Reusing</a>
                <a class="dropdown-item" href="https://coderefinery.org/lessons/contributing">Contributing</a>
                <a class="dropdown-item" href="https://coderefinery.org/lessons/other-projects">Other projects</a>
              </div>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="https://coderefinery.org/blog">Blog</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="https://coderefinery.org/repository">Gitlab repository</a>
            </li>
          </ul>
        </div>
      </nav>
      </header>

      <!-- end navigation -->
<main role="main">
    <div class="container">
      <div class="row top-buffer">
        <div class="col">
          
            <h1>git-pr: painless small pull requests</h1>
          
          
        </div>
      </div>

      
  September 29, 2020
  
    <br>
    <br>
    <i>Richard Darst</i>
  

  <hr>

  <div class="top-buffer">
    <h1 id="git-pr-painless-small-pull-requests">git-pr: painless small pull requests</h1>
<p>In CodeRefinery, we teach the benefit of small changes via pull
requests in order to have better collaboration and review.  But, when
the changes get small enough, the time it takes to run the commands
and open the pull requests begins to get annoying.  I looked around
for other tools that could make this faster, but wasn't quite
satisfied with anything.  So, I slowly started making something that
evolved into git-pr, <a href="https://github.com/NordicHPC/git-pr">https://github.com/NordicHPC/git-pr</a>.</p>
<p>Let's talk about how it works.</p>
<h2 id="making-a-change">Making a change</h2>
<p>First, git-pr will help you to make the new feature branch.  <code>git pr branch $branch_name</code> willcreate a new feature branch off of the
upstreamdefault branch and check it out for you.  You might want to
<code>git fetch</code> first.  Make your commits off of this branch.</p>
<p>One trick I use is to write the first commit's message like I would
write the pull request description.  I decided it's usually not worth
writing a separate description for the pull request itself.  Perhaps
there is some advantage to including the PR message in the git history
itself, too.</p>
<p>Then, to push the pull request, I use <code>git pr open</code>.  This will push
the current branch, and open a pull request on both Github and Gitlab.
It will pop up an editor pre-seeded with the commit's message for you
to further edit.  Once you save and close, the pull request is made.</p>
<p>One thing that git-pr will do is figure out the upstream and your
local copy by yourself.  Default upstream goes in priority order
<code>upstream</code>→<code>origin</code>, Default personal fork goes in the order
<code>local</code>→<code>origin</code>→<code>upstream</code>, so no matter if you first clone the
upstream, or your own fork, you can always add the other with only one
command and have it auto-detected with no renaming.</p>
<p><code>git pr prune</code> will remove all merged branches both locally and on the
remote (possibly dangerous!).</p>
<p>Various <code>git pr fetch*</code> commands will fetch pull requests into a local
<code>pr/NNN</code> branch.</p>
<p>There are various other small useful things, with it, but this is the
main part.</p>
<p>These are <em>only</em> shorthands for things you can easily do with other
git commands, but they save you time.  It gets me closer to the ideal
of making many small pull requests.</p>
<h2 id="about-git-pr">About git-pr</h2>
<p>You can find it at <a href="https://github.com/NordicHPC/git-pr">https://github.com/NordicHPC/git-pr</a> - it is a
single shell script to copy to your path.</p>
<p>It's beta-quality software: it is used by me and a few others all the
time, but there will almost certainly be issues as others start using
it.  Send issues and PRs!</p>
<p>It supports both Github and Gitlab, though Gitlab support is less well
tested.</p>
<p>There is a lot of prior art on different pieces here, there isn't much
in git-pr that is completely new - In particular, the GitHub command
line interface has come out since then and has some overlap.  You can
see other options in the git-pr README.</p>

  </div>

    </div>
  </main>
      <!-- footer -->
      <footer class="text-muted">
        <div class="container">
          <div class="row">
            <div class="col-lg">
              <p>
                <strong>Funding</strong>
              </p>
              <p>
                CodeRefinery is a project within the
                <a href="https://neic.no" target="_blank">Nordic e-Infrastructure Collaboration</a> (NeIC).
                NeIC is an organisational unit under <a href="http://www.nordforsk.org/en" target="_blank">NordForsk</a>.
              </p>
            </div>
            <div class="col-lg">
              <p>
                <strong>Privacy</strong>
              </p>
              <p>
                <a href="/privacy-policy/" target="_blank">Privacy policy</a>
              </p>
            </div>
            <div class="col-lg">
              <p>
                <strong>Follow us</strong>
              </p>
              <p>
                <a href="https://github.com/coderefinery" class="social" target="_blank">
                  <i class="bi bi-github" style="font-size: 2rem; color: black;"></i>
                </a>
                <a href="https://twitter.com/coderefine"  class="social" target="_blank">
                  <i class="bi bi-twitter" style="font-size: 2rem; color: cornflowerblue;"></i>
                </a>
              </p>
            </div>
            <div class="col-lg">
              <p>
                <strong>Contact</strong>
              </p>
              <p>
                <a href="mailto:support@coderefinery.org">support@coderefinery.org</a>
              </p>
            </div>
          </div>
      <!-- end footer -->

        </div>
    </footer>
    

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/anchor-js@4.2.2/anchor.min.js"
            integrity="sha256-E4RlfxwyJVmkkk0szw7LYJxuPlp6evtPSBDlWHsYYL8="
            crossorigin="anonymous"></script>
    <script>
      anchors.add();

      // https://github.com/twbs/bootstrap/issues/1768#issuecomment-6531466
      var shiftWindow = function() { scrollBy(0, -100) };
      if (location.hash) shiftWindow();
      window.addEventListener("hashchange", shiftWindow);
    </script>

  </body>
</html>
